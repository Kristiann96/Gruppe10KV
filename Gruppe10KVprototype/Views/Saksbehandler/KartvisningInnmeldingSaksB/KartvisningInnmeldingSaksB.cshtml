@model Models.Entities.IncidentFormModel


<!-- Leaflet stilark -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

<h2>@Model.Subject</h2>

<div id="map" style="height: 500px;"></div>

<h3>Beskrivelse</h3>
<p>@Model.Description</p>

<h3>Uttrykning</h3>
<p>@(Model.Uttrykning ? "Ja" : "Nei")</p>

@section Scripts {
    <!-- JavaScript biblioteker -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

    <!-- Våre konfigurasjonsfiler -->
    <script src="~/js/maps/config/mapConfig.js"></script>
    <script src="~/js/maps/utils/mapControls.js"></script>

    <script>
        // Initialiser kartet
        const map = MapConfig.initializeMap('map', [63.4305, 10.3951], 13);

        // Legg til bare søkefunksjonalitet
        MapControls.initializeSearch(map);

        // Hent og vis GeoJSON-data
        const geoJsonData = @Html.Raw(Model.GeoJson);
        const geoJsonLayer = L.geoJSON(geoJsonData).addTo(map);

        // Zoom til dataene
        map.fitBounds(geoJsonLayer.getBounds());
    </script>
}
